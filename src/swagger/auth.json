{
  "openapi": "3.0.0",
  "info": {
    "title": "Lezzet Durakları API",
    "version": "1.0.0",
    "description": "Lezzet Durakları Uygulaması için API Dokümantasyonu"
  },
  "servers": [
    {
      "url": "http://localhost:3000"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "paths": {
    "/api/user/search": {
      "post": {
        "summary": "Kullanıcıları sayfalar halinde listele",
        "tags": ["User"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["page", "pageSize"],
                "properties": {
                  "page": {
                    "type": "integer",
                    "example": 1
                  },
                  "pageSize": {
                    "type": "integer",
                    "example": 10
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Kullanıcı listesi başarıyla getirildi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "totalCount": {
                      "type": "integer",
                      "example": 100
                    },
                    "users": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "1a2b3c4d"
                          },
                          "name": {
                            "type": "string",
                            "example": "Ahmet"
                          },
                          "email": {
                            "type": "string",
                            "example": "ahmet@example.com"
                          },
                          "phone_number": {
                            "type": "string",
                            "example": "+905555555555"
                          },
                          "role": {
                            "type": "string",
                            "example": "User"
                          },
                          "is_verified": {
                            "type": "boolean",
                            "example": true
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Yetkilendirme başarısız: Token bulunamadı"
          },
          "403": {
            "description": "Yetkilendirme başarısız: Geçersiz token"
          },
          "500": {
            "description": "Sunucu hatası"
          }
        }
      }
    },
    "/api/user/register": {
      "post": {
        "summary": "Yeni kullanıcı kaydı",
        "tags": ["User"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password", "name", "phone_number"],
                "properties": {
                  "email": {
                    "type": "string",
                    "example": "ahmet@example.com"
                  },
                  "password": {
                    "type": "string",
                    "example": "password123"
                  },
                  "name": {
                    "type": "string",
                    "example": "Ahmet"
                  },
                  "phone_number": {
                    "type": "string",
                    "example": "+905555555555"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Kullanıcı başarıyla kaydedildi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Kullanıcı başarıyla kaydedildi!"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Sunucu hatası",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Kayıt sırasında bir hata oluştu."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/user/login": {
      "post": {
        "summary": "Kullanıcı girişi",
        "tags": ["Auth"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["email", "password"],
                "properties": {
                  "email": {
                    "type": "string",
                    "example": "ahmet@example.com"
                  },
                  "password": {
                    "type": "string",
                    "example": "password123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Başarılı giriş",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "1a2b3c4d"
                        },
                        "email": {
                          "type": "string",
                          "example": "ahmet@example.com"
                        },
                        "name": {
                          "type": "string",
                          "example": "Ahmet"
                        },
                        "phone_number": {
                          "type": "string",
                          "example": "+905555555555"
                        },
                        "role": {
                          "type": "string",
                          "example": "User"
                        },
                        "is_verified": {
                          "type": "boolean",
                          "example": true
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Geçersiz email veya şifre",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Kullanıcı bulunamadı!"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Sunucu hatası",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Giriş sırasında bir hata oluştu."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
   "/api/user/update": {
  "post": {
    "summary": "Kullanıcı bilgilerini güncelle",
    "tags": ["User"],
    "security": [
      {
        "bearerAuth": []
      }
    ],
    "requestBody": {
      "required": true,
      "content": {
        "multipart/form-data": {
          "schema": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "example": "Ahmet"
              },
              "phone_number": {
                "type": "string",
                "example": "+905555555555"
              },
              "email": {
                "type": "string",
                "example": "ahmet@example.com",
                "readOnly": true,
                "description": "Email alanı sabit, değiştirilemez."
              },
              "picture": {
                "type": "string",
                "format": "binary",
                "description": "Kullanıcının profil resmi, dosya olarak gönderilir. Dosya adı email'in ilk kısmına göre adlandırılacaktır."
              }
            }
          }
        }
      }
    },
    "responses": {
      "200": {
        "description": "Kullanıcı bilgileri başarıyla güncellendi",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "boolean",
                  "example": true
                },
                "message": {
                  "type": "string",
                  "example": "Kullanıcı bilgileri başarıyla güncellendi!"
                },
                "picturePath": {
                  "type": "string",
                  "example": "images/ahmet.jpg",
                  "description": "Profil resmi yolu."
                }
              }
            }
          }
        }
      },
      "401": {
        "description": "Yetkilendirme başarısız: Token bulunamadı"
      },
      "403": {
        "description": "Yetkilendirme başarısız: Geçersiz token"
      },
      "404": {
        "description": "Kullanıcı bulunamadı"
      },
      "500": {
        "description": "Sunucu hatası",
        "content": {
          "application/json": {
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "boolean",
                  "example": false
                },
                "message": {
                  "type": "string",
                  "example": "Güncelleme sırasında bir hata oluştu."
                }
              }
            }
          }
        }
      }
    }
  }
},
    "/api/user/get-user-details": {
      "get": {
        "summary": "Kullanıcı detaylarını getir",
        "tags": ["User"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Kullanıcı detayları başarıyla getirildi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "1a2b3c4d"
                        },
                        "name": {
                          "type": "string",
                          "example": "Ahmet"
                        },
                        "email": {
                          "type": "string",
                          "example": "ahmet@example.com"
                        },
                        "phone_number": {
                          "type": "string",
                          "example": "+905555555555"
                        },
                        "role": {
                          "type": "string",
                          "example": "User"
                        },
                        "is_verified": {
                          "type": "boolean",
                          "example": true
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Yetkilendirme başarısız: Token bulunamadı"
          },
          "403": {
            "description": "Yetkilendirme başarısız: Geçersiz token"
          },
          "404": {
            "description": "Kullanıcı bulunamadı"
          },
          "500": {
            "description": "Sunucu hatası"
          }
        }
      }
    },
    "/api/user/delete": {
      "delete": {
        "summary": "Kullanıcı hesabını sil",
        "tags": ["User"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Kullanıcı başarıyla silindi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Kullanıcı başarıyla silindi."
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Yetkilendirme başarısız: Token bulunamadı"
          },
          "403": {
            "description": "Yetkilendirme başarısız: Geçersiz token"
          },
          "404": {
            "description": "Kullanıcı bulunamadı"
          },
          "500": {
            "description": "Sunucu hatası"
          }
        }
      }
    },
    "/api/user/refresh-token": {
      "post": {
        "summary": "Token yenileme",
        "tags": ["Auth"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["token"],
                "properties": {
                  "token": {
                    "type": "string",
                    "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token başarıyla yenilendi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "token": {
                      "type": "string",
                      "example": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Geçersiz veya süresi dolmuş token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Token geçersiz veya süresi dolmuş."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Sunucu hatası",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Token yenileme sırasında bir hata oluştu."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/user/logout": {
      "post": {
        "summary": "Kullanıcı çıkış yapar",
        "tags": ["Auth"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Başarıyla çıkış yapıldı.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Başarıyla çıkış yapıldı."
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Yetkilendirme başarısız: Token bulunamadı."
          }
        }
      }
    },
    "/api/restaurant/add": {
      "post": {
        "summary": "Restoran ekleme",
        "tags": ["Restaurant"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "example": "Lezzet Durağı"
                  },
                  "address": {
                    "type": "string",
                    "example": "İstanbul, Türkiye"
                  },
                  "contact_info": {
                    "type": "string",
                    "example": "+905555555555"
                  },
                  "menu": {
                    "type": "string",
                    "example": "Menü bilgileri burada yer alır."
                  },
                  "logo": {
                    "type": "string",
                    "format": "binary",
                    "description": "Restoran logosu"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Restoran başarıyla eklendi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Restoran başarıyla eklendi!"
                    },
                    "restaurantId": {
                      "type": "string",
                      "example": "f3b9f72d-6f2d-4c83-93a7-12e5a8c6b6bb"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Yetkilendirme başarısız: Token bulunamadı"
          },
          "500": {
            "description": "Restoran eklenirken bir hata oluştu"
          }
        }
      }
    },
    "/api/restaurant/update": {
      "post": {
        "summary": "Restoran güncelleme",
        "tags": ["Restaurant"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "example": "f3b9f72d-6f2d-4c83-93a7-12e5a8c6b6bb"
                  },
                  "name": {
                    "type": "string",
                    "example": "Lezzet Durağı"
                  },
                  "address": {
                    "type": "string",
                    "example": "İstanbul, Türkiye"
                  },
                  "contact_info": {
                    "type": "string",
                    "example": "+905555555555"
                  },
                  "menu": {
                    "type": "string",
                    "example": "Güncellenmiş menü bilgileri burada yer alır."
                  },
                  "logo": {
                    "type": "string",
                    "format": "binary",
                    "description": "Restoran logosu"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Restoran başarıyla güncellendi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Restoran başarıyla güncellendi!"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Restoran bulunamadı veya yetkiniz yok"
          },
          "500": {
            "description": "Restoran güncellenirken bir hata oluştu"
          }
        }
      }
    },
    "/api/restaurant/delete": {
      "delete": {
        "summary": "Restoran silme",
        "tags": ["Restaurant"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "example": "f3b9f72d-6f2d-4c83-93a7-12e5a8c6b6bb"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Restoran başarıyla silindi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Restoran başarıyla silindi."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Restoran bulunamadı veya yetkiniz yok"
          },
          "500": {
            "description": "Restoran silinirken bir hata oluştu"
          }
        }
      }
    },
    "/api/restaurant/{id}": {
      "get": {
        "summary": "Restoran detaylarını getirme",
        "tags": ["Restaurant"],
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "Restoran ID",
            "schema": {
              "type": "string",
              "example": "f3b9f72d-6f2d-4c83-93a7-12e5a8c6b6bb"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Restoran detayları başarıyla getirildi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "restaurant": {
                      "type": "object",
                      "properties": {
                        "id": {
                          "type": "string",
                          "example": "f3b9f72d-6f2d-4c83-93a7-12e5a8c6b6bb"
                        },
                        "name": {
                          "type": "string",
                          "example": "Lezzet Durağı"
                        },
                        "address": {
                          "type": "string",
                          "example": "İstanbul, Türkiye"
                        },
                        "contact_info": {
                          "type": "string",
                          "example": "+905555555555"
                        },
                        "menu": {
                          "type": "string",
                          "example": "Menü bilgileri burada yer alır."
                        },
                        "logo_url": {
                          "type": "string",
                          "example": "images/restaurants/logo.jpg"
                        },
                        "owner_id": {
                          "type": "string",
                          "example": "0a4e5f66-8f32-41f3-98f5-0296c8f7d7bb"
                        },
                        "is_approved": {
                          "type": "boolean",
                          "example": true
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Restoran bulunamadı"
          },
          "500": {
            "description": "Restoran bilgileri alınırken bir hata oluştu"
          }
        }
      }
    },
    "/api/restaurant/": {
      "get": {
        "summary": "Onaylanmış restoranları listeleme",
        "tags": ["Restaurant"],
        "responses": {
          "200": {
            "description": "Onaylanmış restoranlar başarıyla listelendi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "restaurants": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string",
                            "example": "f3b9f72d-6f2d-4c83-93a7-12e5a8c6b6bb"
                          },
                          "name": {
                            "type": "string",
                            "example": "Lezzet Durağı"
                          },
                          "address": {
                            "type": "string",
                            "example": "İstanbul, Türkiye"
                          },
                          "contact_info": {
                            "type": "string",
                            "example": "+905555555555"
                          },
                          "menu": {
                            "type": "string",
                            "example": "Menü bilgileri burada yer alır."
                          },
                          "logo_url": {
                            "type": "string",
                            "example": "images/restaurants/logo.jpg"
                          },
                          "owner_id": {
                            "type": "string",
                            "example": "0a4e5f66-8f32-41f3-98f5-0296c8f7d7bb"
                          },
                          "is_approved": {
                            "type": "boolean",
                            "example": true
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Restoranlar alınırken bir hata oluştu"
          }
        }
      }
    },
    "/api/restaurant/approve": {
      "post": {
        "summary": "Restoran onaylama",
        "tags": ["Restaurant"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "id": {
                    "type": "string",
                    "example": "f3b9f72d-6f2d-4c83-93a7-12e5a8c6b6bb"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Restoran başarıyla onaylandı",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Restoran başarıyla onaylandı."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Restoran onaylanırken bir hata oluştu"
          }
        }
      }
    }
  }
}