{
  "openapi": "3.0.0",
  "info": {
    "title": "Node.js API",
    "version": "1.0.0",
    "description": "Node.js API Dokümantasyonu"
  },
  "servers": [
    {
      "url": "http://localhost:3000"
    }
  ],
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      }
    }
  },
  "paths": {
    "/api/user/search": {
      "post": {
        "summary": "Kullanıcıları sayfalar halinde listele",
        "tags": ["User"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["page", "pageSize"],
                "properties": {
                  "page": {
                    "type": "integer",
                    "example": 2147483647
                  },
                  "pageSize": {
                    "type": "integer",
                    "example": 1000
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Kullanıcı listesi başarıyla getirildi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "totalCount": {
                      "type": "integer",
                      "example": 0
                    },
                    "users": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "integer",
                            "example": 0
                          },
                          "username": {
                            "type": "string",
                            "example": "string"
                          },
                          "name": {
                            "type": "string",
                            "example": "string"
                          },
                          "surname": {
                            "type": "string",
                            "example": "string"
                          },
                          "birthdate": {
                            "type": "string",
                            "format": "date",
                            "example": "2024-10-05"
                          },
                          "city": {
                            "type": "string",
                            "example": "string"
                          },
                          "district": {
                            "type": "string",
                            "example": "string"
                          },
                          "picture": {
                            "type": "string",
                            "example": "string"
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Yetkilendirme başarısız: Token bulunamadı"
          },
          "403": {
            "description": "Yetkilendirme başarısız: Geçersiz token"
          },
          "500": {
            "description": "Sunucu hatası"
          }
        }
      }
    },
    "/api/user/register": {
      "post": {
        "summary": "Yeni kullanıcı kaydı",
        "tags": ["User"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["username", "password"],
                "properties": {
                  "username": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Kullanıcı başarıyla kaydedildi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Kullanıcı başarıyla kaydedildi!"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Sunucu hatası",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Kayıt sırasında bir hata oluştu."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/user/login": {
      "post": {
        "summary": "Kullanıcı girişi",
        "tags": ["Auth"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["username", "password"],
                "properties": {
                  "username": {
                    "type": "string"
                  },
                  "password": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Başarılı giriş",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string"
                    },
                    "user": {
                      "type": "object",
                      "properties": {
                        "username": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "surname": {
                          "type": "string"
                        },
                        "birthdate": {
                          "type": "string"
                        },
                        "city": {
                          "type": "string"
                        },
                        "district": {
                          "type": "string"
                        },
                        "picture": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Geçersiz kullanıcı adı veya şifre",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Kullanıcı bulunamadı!"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Sunucu hatası",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Giriş sırasında bir hata oluştu."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/user/update": {
      "post": {
        "summary": "Kullanıcı bilgilerini güncelle",
        "tags": ["User"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "multipart/form-data": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string"
                  },
                  "surname": {
                    "type": "string"
                  },
                  "birthdate": {
                    "type": "string"
                  },
                  "city": {
                    "type": "string"
                  },
                  "district": {
                    "type": "string"
                  },
                  "picture": {
                    "type": "string",
                    "format": "binary"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Kullanıcı bilgileri başarıyla güncellendi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Kullanıcı bilgileri başarıyla güncellendi!"
                    },
                    "picturePath": {
                      "type": "string",
                      "example": "images/username.jpg"
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Yetkilendirme başarısız: Token bulunamadı"
          },
          "403": {
            "description": "Yetkilendirme başarısız: Geçersiz token"
          },
          "404": {
            "description": "Kullanıcı bulunamadı"
          },
          "500": {
            "description": "Sunucu hatası",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Güncelleme sırasında bir hata oluştu."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/user/get-user-details": {
      "get": {
        "summary": "Kullanıcı detaylarını getir",
        "tags": ["User"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Kullanıcı detayları başarıyla getirildi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "user": {
                      "type": "object",
                      "properties": {
                        "username": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "surname": {
                          "type": "string"
                        },
                        "birthdate": {
                          "type": "string",
                          "format": "date",
                          "nullable": true,
                          "description": "YYYY-MM-DD formatında tarih. Boş bırakılabilir."
                        },
                        "city": {
                          "type": "string"
                        },
                        "district": {
                          "type": "string"
                        },
                        "picture": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Yetkilendirme başarısız: Token bulunamadı"
          },
          "403": {
            "description": "Yetkilendirme başarısız: Geçersiz token"
          },
          "404": {
            "description": "Kullanıcı bulunamadı"
          },
          "500": {
            "description": "Sunucu hatası"
          }
        }
      }
    },
    "/api/user/delete": {
      "delete": {
        "summary": "Kullanıcı hesabını sil",
        "tags": ["User"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Kullanıcı başarıyla silindi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Kullanıcı başarıyla silindi."
                    }
                  }
                }
              }
            }
          },
          "401": {
            "description": "Yetkilendirme başarısız: Token bulunamadı"
          },
          "403": {
            "description": "Yetkilendirme başarısız: Geçersiz token"
          },
          "404": {
            "description": "Kullanıcı bulunamadı"
          },
          "500": {
            "description": "Sunucu hatası"
          }
        }
      }
    },
    "/api/user/refresh-token": {
      "post": {
        "summary": "Token yenileme",
        "tags": ["Auth"],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["token"],
                "properties": {
                  "token": {
                    "type": "string"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Token başarıyla yenilendi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "token": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          },
          "403": {
            "description": "Geçersiz veya süresi dolmuş token",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Token geçersiz veya süresi dolmuş."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Sunucu hatası",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Token yenileme sırasında bir hata oluştu."
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/user/change-password": {
      "post": {
        "summary": "Şifre değiştir",
        "tags": ["User"],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": ["userId", "password", "confirmPassword"],
                "properties": {
                  "userId": {
                    "type": "string",
                    "example": "1"
                  },
                  "password": {
                    "type": "string",
                    "example": "newPassword123"
                  },
                  "confirmPassword": {
                    "type": "string",
                    "example": "newPassword123"
                  }
                }
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Şifre başarıyla değiştirildi",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": true
                    },
                    "message": {
                      "type": "string",
                      "example": "Şifre başarıyla değiştirildi!"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Şifreler eşleşmiyor veya mevcut şifre ile aynı",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Şifreler eşleşmiyor veya yeni şifre mevcut şifre ile aynı olamaz."
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Kullanıcı bulunamadı",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Kullanıcı bulunamadı."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Sunucu hatası",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "status": {
                      "type": "boolean",
                      "example": false
                    },
                    "message": {
                      "type": "string",
                      "example": "Şifre değiştirirken bir hata oluştu."
                    }
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}